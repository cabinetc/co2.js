!function(){"use strict";const e=72e-12,t=1.465e-9/3;var n=class{constructor(e){this.options=e,this.KWH_PER_BYTE_FOR_NETWORK=t}perByte(n,r){if(n<1)return 0;if(r){return n*e*0+n*t*475}return 5.603333333333333e-10*n*519}};var r=1e9;var i={data:{AFG:120.48,AFRICA:510.26,ALB:23.44,DZA:498.9,ASM:687.5,AGO:195.98,ATG:657.14,ARG:344.31,ARM:222.68,ABW:591.4,ASEAN:505.72,ASIA:535.1,AUS:501.7,AUT:157.52,AZE:532.9,BHS:698.11,BHR:489.77,BGD:577.03,BRB:644.86,BLR:415.64,BEL:165.36,BLZ:484.38,BEN:666.67,BTN:24.44,BOL:323.87,BIH:517.24,BWA:794.52,BRA:102.09,BRN:658.85,BGR:399.57,BFA:611.43,BDI:250,CPV:600,KHM:400.46,CMR:278.26,CAN:125.84,CYM:684.93,CAF:0,TCD:677.42,CHL:332.61,CHN:533.98,COL:168.95,COM:714.29,COG:395.52,COD:25.36,COK:400,CRI:37.21,CIV:410.75,HRV:246.46,CUB:602.03,CYP:589.35,CZE:415.35,DNK:180.71,DJI:666.67,DMA:529.41,DOM:550.88,ECU:188.71,EGY:469.63,SLV:194.23,GNQ:492.96,ERI:688.89,EST:464.03,SWZ:189.19,ETH:25.19,EU:277.22,EUROPE:296.96,FLK:500,FRO:428.57,FJI:289.47,FIN:130.98,FRA:84.82,GUF:254.72,PYF:471.43,G20:442.38,G7:343.92,GAB:397.38,GMB:700,GEO:134.83,DEU:384.83,GHA:361.2,GRC:343.82,GRL:133.33,GRD:714.29,GLP:611.77,GUM:670.33,GTM:320.64,GIN:208.63,GNB:750,GUY:642.28,HTI:606.06,HND:375.1,HKG:683.97,HUN:222.97,ISL:28.56,IND:633.4,IDN:619.02,IRN:487.86,IRQ:498.87,IRL:346.33,ISR:548.03,ITA:371.69,JAM:519.54,JPN:494.86,JOR:399.91,KAZ:635.57,KEN:100.57,KIR:666.67,XKX:768.73,KWT:489.65,KGZ:104.43,LAO:242.18,"LATIN AMERICA AND CARIBBEAN":241.91,LVA:181.82,LBN:594.75,LSO:20,LBR:304.35,LBY:550.42,LTU:194.25,LUX:168.14,MAC:491.53,MDG:483.25,MWI:133.8,MYS:543.87,MDV:651.52,MLI:466.08,MLT:495,MTQ:698.63,MRT:526.6,MUS:611.11,MEX:423.81,"MIDDLE EAST":512.24,MDA:678.44,MNG:749.66,MNE:399.38,MSR:1e3,MAR:610.41,MOZ:126.63,MMR:344.37,NAM:63.69,NRU:750,NPL:24.51,NLD:355.78,NCL:610.12,NZL:97.73,NIC:354.21,NER:622.22,NGA:368.22,"NORTH AMERICA":336.01,PRK:157.79,MKD:529.33,NOR:28.82,OCEANIA:449.43,OECD:341.08,OMN:488.27,PAK:344.16,PSE:465.12,PAN:192.14,PNG:526.75,PRY:25.49,PER:256.51,POL:634.58,PRT:234.03,PRI:681.47,QAT:489.68,REU:519.03,ROU:264.12,RUS:363.68,RWA:294.12,KNA:681.82,LCA:685.71,SPM:800,VCT:500,WSM:470.59,STP:600,SAU:557.78,SEN:523.13,SRB:569.38,SYC:615.39,SLE:47.62,SGP:488.78,SVK:140.67,SVN:237.38,SLB:727.27,SOM:634.15,ZAF:708.19,KOR:437.6,SSD:684.21,ESP:217.37,LKA:463,SDN:264.01,SUR:356.44,SWE:45.08,CHE:45.62,SYR:541.17,TWN:561.02,TJK:83.63,TZA:366.75,THA:501.57,PHL:582.05,TGO:460.32,TON:625,TTO:491.41,TUN:469.43,TUR:413.63,TKM:490.19,TCA:703.7,UGA:52.27,UKR:187.06,ARE:407.98,GBR:261.24,USA:367.26,URY:114.81,UZB:505.41,VUT:571.43,VEN:212.48,VNM:386.49,VGB:714.29,VIR:685.71,WORLD:437.26,YEM:543.91,ZMB:84.7,ZWE:392.28},type:"average"};const o=i.data.WORLD,a=.75,s=.25,l=.02,d=e=>parseFloat(e.toFixed(2));function u(e){var t,n,r,d,u,c;if("object"!=typeof e)throw new Error("Options must be an object");const g={};if(null==e?void 0:e.gridIntensity){g.gridIntensity={};const{device:a,dataCenter:s,network:l}=e.gridIntensity;a&&("object"==typeof a?(i.data[null==(t=a.country)?void 0:t.toUpperCase()]||(console.warn(`"${a.country}" is not a valid country. Please use a valid 3 digit ISO 3166 country code. \nSee https://developers.thegreenwebfoundation.org/co2js/data/ for more information. \nFalling back to global average grid intensity.`),g.gridIntensity.device={value:o}),g.gridIntensity.device={country:a.country,value:parseFloat(i.data[null==(n=a.country)?void 0:n.toUpperCase()])}):"number"==typeof a?g.gridIntensity.device={value:a}:(g.gridIntensity.device={value:o},console.warn(`The device grid intensity must be a number or an object. You passed in a ${typeof a}. \nFalling back to global average grid intensity.`))),s&&("object"==typeof s?(i.data[null==(r=s.country)?void 0:r.toUpperCase()]||(console.warn(`"${s.country}" is not a valid country. Please use a valid 3 digit ISO 3166 country code. \nSee https://developers.thegreenwebfoundation.org/co2js/data/ for more information.  \nFalling back to global average grid intensity.`),g.gridIntensity.dataCenter={value:o}),g.gridIntensity.dataCenter={country:s.country,value:parseFloat(i.data[null==(d=s.country)?void 0:d.toUpperCase()])}):"number"==typeof s?g.gridIntensity.dataCenter={value:s}:(g.gridIntensity.dataCenter={value:o},console.warn(`The data center grid intensity must be a number or an object. You passed in a ${typeof s}. \nFalling back to global average grid intensity.`))),l&&("object"==typeof l?(i.data[null==(u=l.country)?void 0:u.toUpperCase()]||(console.warn(`"${l.country}" is not a valid country. Please use a valid 3 digit ISO 3166 country code. \nSee https://developers.thegreenwebfoundation.org/co2js/data/ for more information.  Falling back to global average grid intensity. \nFalling back to global average grid intensity.`),g.gridIntensity.network={value:o}),g.gridIntensity.network={country:l.country,value:parseFloat(i.data[null==(c=l.country)?void 0:c.toUpperCase()])}):"number"==typeof l?g.gridIntensity.network={value:l}:(g.gridIntensity.network={value:o},console.warn(`The network grid intensity must be a number or an object. You passed in a ${typeof l}. \nFalling back to global average grid intensity.`)))}return(null==e?void 0:e.dataReloadRatio)&&("number"==typeof e.dataReloadRatio?e.dataReloadRatio>=0&&e.dataReloadRatio<=1?g.dataReloadRatio=e.dataReloadRatio:(g.dataReloadRatio=l,console.warn(`The dataReloadRatio option must be a number between 0 and 1. You passed in ${e.dataReloadRatio}. \nFalling back to default value.`)):(g.dataReloadRatio=l,console.warn(`The dataReloadRatio option must be a number. You passed in a ${typeof e.dataReloadRatio}. \nFalling back to default value.`))),(null==e?void 0:e.firstVisitPercentage)&&("number"==typeof e.firstVisitPercentage?e.firstVisitPercentage>=0&&e.firstVisitPercentage<=1?g.firstVisitPercentage=e.firstVisitPercentage:(g.firstVisitPercentage=a,console.warn(`The firstVisitPercentage option must be a number between 0 and 1. You passed in ${e.firstVisitPercentage}. \nFalling back to default value.`)):(g.firstVisitPercentage=a,console.warn(`The firstVisitPercentage option must be a number. You passed in a ${typeof e.firstVisitPercentage}. \nFalling back to default value.`))),(null==e?void 0:e.returnVisitPercentage)&&("number"==typeof e.returnVisitPercentage?e.returnVisitPercentage>=0&&e.returnVisitPercentage<=1?g.returnVisitPercentage=e.returnVisitPercentage:(g.returnVisitPercentage=s,console.warn(`The returnVisitPercentage option must be a number between 0 and 1. You passed in ${e.returnVisitPercentage}. \nFalling back to default value.`)):(g.returnVisitPercentage=s,console.warn(`The returnVisitPercentage option must be a number. You passed in a ${typeof e.returnVisitPercentage}. \nFalling back to default value.`))),g}var c=Object.defineProperty,g=Object.defineProperties,y=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,h=(e,t,n)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m=(e,t)=>{for(var n in t||(t={}))f.call(t,n)&&h(e,n,t[n]);if(p)for(var n of p(t))v.call(t,n)&&h(e,n,t[n]);return e},b=(e,t)=>g(e,y(t));var R=class{constructor(e){this.options=e}energyPerByteByComponent(e){const t=.81*(e/r);return{consumerDeviceEnergy:.52*t,networkEnergy:.14*t,productionEnergy:.19*t,dataCenterEnergy:.15*t}}co2byComponent(e,t=o,n={}){let r=o,i=o,a=o,s=o;if(null==n?void 0:n.gridIntensity){const{device:e,network:t,dataCenter:o}=n.gridIntensity;(null==e?void 0:e.value)&&(r=e.value),(null==t?void 0:t.value)&&(i=t.value),(null==o?void 0:o.value)&&(a=o.value)}!0===t&&(a=50);const l={};for(const[t,n]of Object.entries(e))t.startsWith("dataCenterEnergy")?l[t.replace("Energy","CO2")]=n*a:t.startsWith("consumerDeviceEnergy")?l[t.replace("Energy","CO2")]=n*r:t.startsWith("networkEnergy")?l[t.replace("Energy","CO2")]=n*i:l[t.replace("Energy","CO2")]=n*s;return l}perByte(e,t=!1,n=!1,r={}){const i=this.energyPerByteByComponent(e,r);if("boolean"!=typeof t)throw new Error(`perByte expects a boolean for the carbon intensity value. Received: ${t}`);const o=this.co2byComponent(i,t,r),a=Object.values(o).reduce(((e,t)=>e+t));return n?b(m({},o),{total:a}):a}perVisit(e,t=!1,n=!1,r={}){const i=this.energyPerVisitByComponent(e,r);if("boolean"!=typeof t)throw new Error(`perVisit expects a boolean for the carbon intensity value. Received: ${t}`);const o=this.co2byComponent(i,t,r),a=Object.values(o).reduce(((e,t)=>e+t));return n?b(m({},o),{total:a}):a}energyPerByte(e){const t=this.energyPerByteByComponent(e);return Object.values(t).reduce(((e,t)=>e+t))}energyPerVisitByComponent(e,t={},n=.75,r=.25,i=.02){t.dataReloadRatio&&(i=t.dataReloadRatio),t.firstVisitPercentage&&(n=t.firstVisitPercentage),t.returnVisitPercentage&&(r=t.returnVisitPercentage);const o=this.energyPerByteByComponent(e),a={};Object.values(o);for(const[e,t]of Object.entries(o))a[`${e} - first`]=t*n,a[`${e} - subsequent`]=t*r*i;return a}energyPerVisit(e){let t=0,n=0;const r=Object.entries(this.energyPerVisitByComponent(e));for(const[e,n]of r)e.indexOf("first")>0&&(t+=n);for(const[e,t]of r)e.indexOf("subsequent")>0&&(n+=t);return t+n}emissionsPerVisitInGrams(e,t=o){return d(e*t)}annualEnergyInKwh(e,t=1e3){return e*t*12}annualEmissionsInGrams(e,t=1e3){return e*t*12}annualSegmentEnergy(e){return{consumerDeviceEnergy:d(.52*e),networkEnergy:d(.14*e),dataCenterEnergy:d(.15*e),productionEnergy:d(.19*e)}}};var P=class{constructor(e){if(this.model=new R,"1byte"===(null==e?void 0:e.model))this.model=new n;else if("swd"===(null==e?void 0:e.model))this.model=new R;else if(null==e?void 0:e.model)throw new Error(`"${e.model}" is not a valid model. Please use "1byte" for the OneByte model, and "swd" for the Sustainable Web Design model.\nSee https://developers.thegreenwebfoundation.org/co2js/models/ to learn more about the models available in CO2.js.`);this._segment="segment"===(null==e?void 0:e.results)}perByte(e,t=!1){return this.model.perByte(e,t,this._segment)}perVisit(e,t=!1){var n;if(null==(n=this.model)?void 0:n.perVisit)return this.model.perVisit(e,t,this._segment);throw new Error("The perVisit() method is not supported in the model you are using. Try using perByte() instead.\nSee https://developers.thegreenwebfoundation.org/co2js/methods/ to learn more about the methods available in CO2.js.")}perByteTrace(e,t=!1,n={}){var r,i,a,s,l,d;let c={};return n&&(c=u(n)),{co2:this.model.perByte(e,t,this._segment,c),green:t,variables:{description:"Below are the variables used to calculate this CO2 estimate.",bytes:e,gridIntensity:{description:"The grid intensity (grams per kilowatt-hour) used to calculate this CO2 estimate.",network:(null==(i=null==(r=null==c?void 0:c.gridIntensity)?void 0:r.network)?void 0:i.value)||o,dataCenter:t?50:(null==(s=null==(a=null==c?void 0:c.gridIntensity)?void 0:a.dataCenter)?void 0:s.value)||o,production:o,device:(null==(d=null==(l=null==c?void 0:c.gridIntensity)?void 0:l.device)?void 0:d.value)||o}}}}perVisitTrace(e,t=!1,n={}){var r,i,a,s,l,d,c;if(null==(r=this.model)?void 0:r.perVisit){let r={};return n&&(r=u(n)),{co2:this.model.perVisit(e,t,this._segment,r),green:t,variables:{description:"Below are the variables used to calculate this CO2 estimate.",bytes:e,gridIntensity:{description:"The grid intensity (grams per kilowatt-hour) used to calculate this CO2 estimate.",network:(null==(a=null==(i=null==r?void 0:r.gridIntensity)?void 0:i.network)?void 0:a.value)||o,dataCenter:t?50:(null==(l=null==(s=null==r?void 0:r.gridIntensity)?void 0:s.dataCenter)?void 0:l.value)||o,production:o,device:(null==(c=null==(d=null==r?void 0:r.gridIntensity)?void 0:d.device)?void 0:c.value)||o},dataReloadRatio:(null==r?void 0:r.dataReloadRatio)||.02,firstVisitPercentage:(null==r?void 0:r.firstVisitPercentage)||.75,returnVisitPercentage:(null==r?void 0:r.returnVisitPercentage)||.25}}}throw new Error("The perVisitDetailed() method is not supported in the model you are using. Try using perByte() instead.\nSee https://developers.thegreenwebfoundation.org/co2js/methods/ to learn more about the methods available in CO2.js.")}perDomain(e,t){const n=[];for(let r of Object.keys(e.domains)){let i;i=t&&t.indexOf(r)>-1?this.perByte(e.domains[r].transferSize,!0):this.perByte(e.domains[r].transferSize),n.push({domain:r,co2:i,transferSize:e.domains[r].transferSize})}return n.sort(((e,t)=>t.co2-e.co2)),n}perPage(e,t){const n=this.perDomain(e,t);let r=0;for(let e of n)r+=e.co2;return r}perContentType(e,t){const n={};for(let r of e.assets){const e=new URL(r.url).domain,i=r.transferSize,o=this.perByte(i,t&&t.indexOf(e)>-1),a=r.type;n[a]||(n[a]={co2:0,transferSize:0}),n[a].co2+=o,n[a].transferSize+=i}const r=[];for(let e of Object.keys(n))r.push({type:e,co2:n[e].co2,transferSize:n[e].transferSize});return r.sort(((e,t)=>t.co2-e.co2)),r}dirtiestResources(e,t){const n=[];for(let r of e.assets){const e=new URL(r.url).domain,i=r.transferSize,o=this.perByte(i,t&&t.indexOf(e)>-1);n.push({url:r.url,co2:o,transferSize:i})}return n.sort(((e,t)=>t.co2-e.co2)),n.slice(0,n.length>10?10:n.length)}perParty(e,t){let n=0,r=0;const i=e.firstPartyRegEx;for(let o of Object.keys(e.domains))o.match(i)?n+=this.perByte(e.domains[o].transferSize,t&&t.indexOf(o)>-1):r+=this.perByte(e.domains[o].transferSize,t&&t.indexOf(o)>-1);return{firstParty:n,thirdParty:r}}};var C={check:function(e){return"string"==typeof e?async function(e){const t=await fetch(`https://api.thegreenwebfoundation.org/greencheck/${e}`);return(await t.json()).green}(e):async function(e){try{const t="https://api.thegreenwebfoundation.org/v2/greencheckmulti",n=JSON.stringify(e),r=await fetch(`${t}/${n}`);return function(e){const t=Object.entries(e);return t.filter((([e,t])=>t.green)).map((([e,t])=>t.url))}(await r.json())}catch(e){return[]}}(e)}};var O={check:function(e){return C.check(e)}};window.addEventListener("load",(function(){var e=window.location.hostname;O.check(e).then((function(e){var t=e,n=new P,r={gridIntensity:{dataCenter:i.data.BEL}},o=0,a=[],s=performance.getEntries();(s=s.filter((function(e){return"transferSize"in e}))).forEach((function(e){o=parseInt(o+e.transferSize),a.push({name:e.name,transferSize:e.transferSize})})),a.sort((function(e,t){return t.transferSize-e.transferSize}));var l=n.perVisitTrace(o,t,r).co2.toFixed(3),d="".concat(a.length," requests emitted an estimated ").concat(l," grams of CO2. ").concat(o," bytes were transferred.");console.log(d)}))}))}();
//# sourceMappingURL=co2.js.map
